<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: usb_bulk_dev</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li class="current"><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="modules.html"><span>模块</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li><a href="examples.html"><span>示例</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">usb_bulk_dev </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example demonstrates the following:</p><ul>
<li>Setting up polled USB endpoints</li>
<li>Setting up interrupt driven USB endpoints</li>
<li>Using the UART as a debug tool</li>
</ul>
<h2>USB module </h2>
<p>Several USB endpoints are being set up:</p><ul>
<li>EP1 OUT - interrupt driven RX endpoint</li>
<li>EP2 IN - interrupt driven TX endpoint</li>
<li>EP3 OUT - polled RX endpoint</li>
<li>EP4 IN - polled TX endpoint</li>
<li>EP5 OUT - polled RX endpoint with unaligned buffer</li>
<li>EP6 IN - polled TX endpoint with unaligned buffer</li>
</ul>
<p>These endpoints do not transfer any meaningful data. Instead, they try to push data in and out as fast as possible by writing it to the FIFOs or reading it from the FIFOs.</p>
<p>The interrupt driven endpoints only read or write a packet during a callback from the USB driver. Since the USB driver is run entirely from the USB ISR, these callbacks are essentially interrupt driven.</p>
<p>The polled endpoints try to continuously read and write data. Even though usbd_ep_read/write_packet is called continuously for these endpoints, the USB driver will only write a packet to the TX FIFO if it is empty, and only read a packet from the FIFO if one has arrived.</p>
<p>The endpoints with a misaligned buffer show the performance drop when the buffer is not aligned to a 4 byte boundary. 32-bit memory accesses to the buffer are downgraded to 8-bit accesses by the hardware.</p>
<h2>Clock change module </h2>
<p>Pressing SW2 toggles the system clock between 80MHz, 57MHz, 40MHz, 30MHz, 20MHz, and 16MHz by changing the PLL divisor.</p>
<p>Pressing SW1 bypasses the PLL completely, and runs off the raw 16MHz clock provided by the external crystal oscillator.</p>
<p>Changing the system clock on-the-fly does not affect the USB peripheral. It is possible to change the system clock while benchmarking the USB endpoint.</p>
<p>The current system clock is printed on the debug interface. This allows testing the performance of the USB endpoints under different clocks.</p>
<h2>Debug module </h2>
<p>printf() support is provided via UART0. The UART0 pins are connected to the CDCACM interface on the ICDI chip, so no extra hardware is necessary to check the debug output. Just connect the debug USB cable and use a terminal program to open the ACM port with 921600-8N1.</p>
<p>For example: </p><blockquote class="doxtable">
<p>$ picocom /dev/ttyACM0 -b921600</p>
</blockquote>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
