<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: GPIO pin control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li class="current"><a href="modules.html"><span>模块</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li><a href="examples.html"><span>示例</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">GPIO pin control<div class="ingroups"><a class="el" href="group__LM3Sxx.html">LM3S</a> &#124; <a class="el" href="group__LM4Fxx.html">LM4F</a> &#124; <a class="el" href="group__LPC13xx.html">LPC13xx</a> &#124; <a class="el" href="group__LPC17xx.html">LPC17xx</a> &#124; <a class="el" href="group__LPC43xx.html">LPC43xx</a> &#124; <a class="el" href="group__STM32F0xx.html">STM32F0xx</a> &#124; <a class="el" href="group__STM32F1xx.html">STM32F1xx</a> &#124; <a class="el" href="group__STM32F2xx.html">STM32F2xx</a> &#124; <a class="el" href="group__STM32F4xx.html">STM32F4xx</a> &#124; <a class="el" href="group__STM32L1xx.html">STM32L1xx</a> &raquo; <a class="el" href="group__gpio__file.html">General Purpose I/O</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Controlling GPIO pins</b>  
<a href="#details">更多...</a></p>
<div class="dynheader">
GPIO pin control 的协作图:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__gpio__control.png" border="0" alt="" usemap="#group____gpio____control"/>
<map name="group____gpio____control" id="group____gpio____control">
<area shape="rect" id="node1" href="group__gpio__file.html" title="LM3S General Purpose I/O " alt="" coords="5,5,147,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:gac7fe863cd889722d5e06916617b007b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gpio__control.html#gac7fe863cd889722d5e06916617b007b1">gpio_toggle</a> (uint32_t gpioport, uint8_t gpios)</td></tr>
<tr class="memdesc:gac7fe863cd889722d5e06916617b007b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle a Group of Pins.  <a href="#gac7fe863cd889722d5e06916617b007b1">更多...</a><br /></td></tr>
<tr class="separator:gac7fe863cd889722d5e06916617b007b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ce0832cd5110fa7bbe0f6c968a04a09"><td class="memItemLeft" align="right" valign="top">BEGIN_DECLS void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gpio__control.html#ga8ce0832cd5110fa7bbe0f6c968a04a09">gpio_set</a> (uint32_t gpioport, uint8_t gpios)</td></tr>
<tr class="memdesc:ga8ce0832cd5110fa7bbe0f6c968a04a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a Group of Pins (atomic)  <a href="#ga8ce0832cd5110fa7bbe0f6c968a04a09">更多...</a><br /></td></tr>
<tr class="separator:ga8ce0832cd5110fa7bbe0f6c968a04a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed9a0283ed78d8746f72a298889207f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gpio__control.html#gaed9a0283ed78d8746f72a298889207f4">gpio_clear</a> (uint32_t gpioport, uint8_t gpios)</td></tr>
<tr class="memdesc:gaed9a0283ed78d8746f72a298889207f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a Group of Pins (atomic)  <a href="#gaed9a0283ed78d8746f72a298889207f4">更多...</a><br /></td></tr>
<tr class="separator:gaed9a0283ed78d8746f72a298889207f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p><b>Controlling GPIO pins</b> </p>
<p>Each I/O port has 8 individually configurable bits. When reading and writing data to the GPIO ports, address bits [9:2] mask the pins to be read or written. This mechanism makes all GPIO port reads and writes on the LM4F atomic operations. The GPIO API takes full advantage of this fact to preserve the atomicity of these operations.</p>
<p>Setting or clearing a group of bits can be accomplished with <a class="el" href="group__gpio__control.html#ga8ce0832cd5110fa7bbe0f6c968a04a09">gpio_set()</a> and <a class="el" href="group__gpio__control.html#gaed9a0283ed78d8746f72a298889207f4">gpio_clear()</a> respectively. These operation use the masking mechanism described above to only affect the specified pins.</p>
<p>Sometimes it is more appropriate to read or set the level of a group of pins on a port, in one atomic operation. Reading the status can be accomplished with gpio_read(). The result is equivalent to reading all the pins, then masking only the desired pins; however, the masking is done in hardware, and does not require an extra hardware operation.</p>
<p>Writing a group of pins can be accomplished with gpio_write(). The mask ('gpios' parameter) is applied in hardware, and the masked pins are not affected, regardless of the value of the respective bits written to the GPIO port.</p>
<p>Two extra functions are provided, <a class="el" href="group__gpio__file.html#gac7a671c0d057a8db484357b344d66b23">gpio_port_read()</a> and gpio_port_write(). They are functionally identical to gpio_read (port, GPIO_ALL) and gpio_write (port, GPIO_ALL, val) respectively. Hence, they are also atomic.</p>
<p>GPIO pins may be toggled with <a class="el" href="group__gpio__defines.html#gac7fe863cd889722d5e06916617b007b1">gpio_toggle()</a>. This function does not translate to an atomic operation.</p>
<dl class="section note"><dt>注解</dt><dd>The <a class="el" href="group__gpio__defines.html#gac7fe863cd889722d5e06916617b007b1">gpio_toggle()</a> operation is the only GPIO port operation which is not atomic. It involves a read-modify-write cycle.</dd></dl>
<p>Suppose PA0, PA1, PA2, and PA3 are to be modified without affecting the other pins on port A. This is common when controlling, for example, a 4-bit bus: </p><div class="fragment"><div class="line"><span class="comment">// Pins 4,5,6, and 7 are unaffected, regardless of the bits in val</span></div><div class="line">gpio_write(GPIOA, GPIO0 | GPIO1 | GPIO2 | GPIO3, val);</div><div class="line"><span class="comment">// Wait a bit then send the other 4 bits</span></div><div class="line">wait_a_bit();</div><div class="line">gpio_write(GPIOA, GPIO0 | GPIO1 | GPIO2 | GPIO3, val &gt;&gt; 4);</div></div><!-- fragment --><p>Suppose a LED is connected to PD4, and we want to flash the LED for a brief period of time: </p><div class="fragment"><div class="line"><a class="code" href="group__gpio__control.html#ga8ce0832cd5110fa7bbe0f6c968a04a09">gpio_set</a>(GPIOD, GPIO4);</div><div class="line">wait_a_bit();</div><div class="line"><a class="code" href="group__gpio__control.html#ga8ce0832cd5110fa7bbe0f6c968a04a09">gpio_set</a>(GPIOD, GPIO4);</div></div><!-- fragment --> <h2 class="groupheader">函数说明</h2>
<a class="anchor" id="gaed9a0283ed78d8746f72a298889207f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void gpio_clear </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>gpioport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gpios</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear a Group of Pins (atomic) </p>
<p>Clear one or more pins of the given GPIO port. This is an atomic operation.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gpioport</td><td>GPIO block register address base <a class="el" href="group__gpio__reg__base.html">GPIO register base addresses</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gpios</td><td><a class="el" href="group__gpio__pin__id.html">GPIO pin identifiers</a>. Any combination of pins may be specified by OR'ing then together. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8ce0832cd5110fa7bbe0f6c968a04a09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void gpio_set </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>gpioport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gpios</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a Group of Pins (atomic) </p>
<p>Set one or more pins of the given GPIO port. This is an atomic operation.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gpioport</td><td>GPIO block register address base <a class="el" href="group__gpio__reg__base.html">GPIO register base addresses</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gpios</td><td><a class="el" href="group__gpio__pin__id.html">GPIO pin identifiers</a>. Any combination of pins may be specified by OR'ing then together. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac7fe863cd889722d5e06916617b007b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpio_toggle </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>gpioport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gpios</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggle a Group of Pins. </p>
<p>Toggle one or more pins of the given GPIO port.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gpioport</td><td>GPIO block register address base <a class="el" href="group__gpio__reg__base.html">GPIO register base addresses</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gpios</td><td>Pin identifiers. <a class="el" href="group__gpio__pin__id.html">GPIO pin identifiers</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
